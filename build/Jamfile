#  (C) Copyright David Abrahams 2001. Permission to copy, use, modify, sell and
#  distribute this software is granted provided this copyright notice appears
#  in all copies. This software is provided "as is" without express or implied
#  warranty, and with no claim as to its suitability for any purpose.
#
# Boost.Python library Jamfile


# declare the location of this subproject relative to the root
subproject libs/python/build ;

# bring in the rules for python
SEARCH on <module@>python.jam = $(BOOST_BUILD_PATH) ;
include <module@>python.jam ;

if [ check-python-config ]
{
    
  local bpl-linkflags ;

  if $(UNIX) && ( $(OS) = AIX )
  {
      bpl-linkflags = <linkflags>"-e initlibboost_python"
        <linkflags>"-e initlibboost_python_debug
        <linkflags>"-e initlibboost_python_pydebug"
        ;
  }

  dll boost_python
    : 
    ../src/numeric.cpp

    ../src/list.cpp
    ../src/long.cpp
    ../src/dict.cpp
    ../src/tuple.cpp
    ../src/str.cpp

    ../src/aix_init_module.cpp
    ../src/converter/from_python.cpp
    ../src/converter/registry.cpp
    ../src/converter/type_id.cpp
    ../src/object/enum.cpp
    ../src/object/class.cpp
    ../src/object/function.cpp
    ../src/object/inheritance.cpp
    ../src/object/life_support.cpp
    ../src/object/pickle_support.cpp
    ../src/errors.cpp
    ../src/module.cpp
    ../src/converter/builtin_converters.cpp
    ../src/converter/arg_to_python_base.cpp
    ../src/object/iterator.cpp
    ../src/object_protocol.cpp
    ../src/object_operators.cpp
    :
    $(BOOST_PYTHON_V2_PROPERTIES)
      <define>BOOST_PYTHON_SOURCE
      $(bpl-linkflags)
      ;

  stage bin-stage : <dll>boost_python
    :
        <tag><debug>"_debug"
        <tag><debug-python>"_pydebug"
    :
        debug release
    ;
}